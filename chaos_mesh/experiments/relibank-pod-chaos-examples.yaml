---
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: relibank-payment-flow-schedule
  namespace: relibank
  labels:
    app: relibank
    experiment-type: pod-chaos
    target-flow: payment-processing
spec:
  cron: "0 * * * *"
  type: PodChaos
  schedule:
    action: pod-kill
    mode: one
    selector:
      namespaces:
      - relibank
      labelSelectors:
        app: transaction-service
    duration: 2m
    gracePeriod: 0

---
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: relibank-database-connection-schedule
  namespace: relibank
  labels:
    app: relibank
    experiment-type: pod-chaos
    target-flow: database-connectivity
spec:
  cron: "0 * * * *"
  type: PodChaos
  schedule:
    action: pod-failure
    mode: one
    selector:
      namespaces:
      - relibank
      labelSelectors:
        app: accounts-service
    duration: 90s
    gracePeriod: 5

---
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: relibank-messaging-service-schedule
  namespace: relibank
  labels:
    app: relibank
    experiment-type: pod-chaos
    target-flow: messaging-notifications
spec:
  cron: "0 * * * *"
  type: PodChaos
  schedule:
    action: pod-kill
    mode: one
    selector:
      namespaces:
      - relibank
      labelSelectors:
        app: notifications-service
    duration: 60s
    gracePeriod: 0

---
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: relibank-bill-pay-resilience-schedule
  namespace: relibank
  labels:
    app: relibank
    experiment-type: pod-chaos
    target-flow: bill-payment
spec:
  cron: "0 * * * *"
  type: PodChaos
  schedule:
    action: pod-failure
    mode: one
    selector:
      namespaces:
      - relibank
      labelSelectors:
        app: bill-pay-service
    duration: 2m
    gracePeriod: 10

---
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: relibank-scheduler-service-schedule
  namespace: relibank
  labels:
    app: relibank
    experiment-type: pod-chaos
    target-flow: event-scheduling
spec:
  cron: "0 * * * *"
  type: PodChaos
  schedule:
    action: pod-kill
    mode: one
    selector:
      namespaces:
      - relibank
      labelSelectors:
        app: scheduler-service
    duration: 45s
    gracePeriod: 0